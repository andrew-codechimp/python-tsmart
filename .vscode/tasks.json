{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "UV: Activate Environment",
      "type": "shell",
      "command": "source .venv/bin/activate",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      }
    },
    {
      "label": "UV: Sync Dependencies",
      "type": "shell",
      "command": "uv sync --all-extras",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "UV: Sync Dependencies (Clean)",
      "type": "shell",
      "command": "uv sync --all-extras --refresh",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "Test: Run All Tests",
      "type": "shell",
      "command": "uv run pytest",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": {
        "kind": "test",
        "isDefault": true
      }
    },
    {
      "label": "Test: Run Tests with Coverage",
      "type": "shell",
      "command": "uv run pytest --cov=src/aiotsmart --cov-report=term-missing",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": "test"
    },
    {
      "label": "Test: Run Tests (Verbose)",
      "type": "shell",
      "command": "uv run pytest -vv",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": "test"
    },
    {
      "label": "Test: Run Specific Test File",
      "type": "shell",
      "command": "uv run pytest ${relativeFile}",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": "test"
    },
    {
      "label": "Type Check: Run mypy",
      "type": "shell",
      "command": "uv run mypy src tests",
      "problemMatcher": [
        {
          "owner": "python",
          "fileLocation": ["relative", "${workspaceFolder}"],
          "pattern": {
            "regexp": "^(.+):(\\d+):(\\d+):\\s+(error|warning|note):\\s+(.*)$",
            "file": 1,
            "line": 2,
            "column": 3,
            "severity": 4,
            "message": 5
          }
        }
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "group": "build"
    },
    {
      "label": "Lint: Run Ruff Check",
      "type": "shell",
      "command": "uv run ruff check src tests",
      "problemMatcher": [
        {
          "owner": "python",
          "fileLocation": ["relative", "${workspaceFolder}"],
          "pattern": {
            "regexp": "^(.+):(\\d+):(\\d+):\\s+(.+)$",
            "file": 1,
            "line": 2,
            "column": 3,
            "message": 4
          }
        }
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "group": "build"
    },
    {
      "label": "Lint: Run Ruff Fix",
      "type": "shell",
      "command": "uv run ruff check --fix src tests",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Run Ruff Format",
      "type": "shell",
      "command": "uv run ruff format src tests",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Lint: Run Pylint",
      "type": "shell",
      "command": "uv run pylint src",
      "problemMatcher": [
        {
          "owner": "python",
          "fileLocation": ["relative", "${workspaceFolder}"],
          "pattern": {
            "regexp": "^(.+):(\\d+):(\\d+):\\s+([CEFRW]\\d+):\\s+(.+)$",
            "file": 1,
            "line": 2,
            "column": 3,
            "code": 4,
            "message": 5
          }
        }
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Pre-commit: Run All Checks",
      "type": "shell",
      "command": "uv run pre-commit run --all-files",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": "build"
    },
    {
      "label": "Pre-commit: Install Hooks",
      "type": "shell",
      "command": "uv run pre-commit install",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "Pre-commit: Update Hooks",
      "type": "shell",
      "command": "uv run pre-commit autoupdate",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "Coverage: Generate HTML Report",
      "type": "shell",
      "command": "uv run pytest --cov=src/aiotsmart --cov-report=html && open htmlcov/index.html",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "Build: Check Package Build",
      "type": "shell",
      "command": "uv build",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "group": "build"
    },
    {
      "label": "Quality: Run All Checks",
      "dependsOn": [
        "Type Check: Run mypy",
        "Lint: Run Ruff Check",
        "Test: Run Tests with Coverage"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "focus": true
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "Clean: Remove Cache and Build Files",
      "type": "shell",
      "command": "rm -rf .pytest_cache .mypy_cache .ruff_cache htmlcov .coverage dist build src/*.egg-info",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    }
  ]
}
